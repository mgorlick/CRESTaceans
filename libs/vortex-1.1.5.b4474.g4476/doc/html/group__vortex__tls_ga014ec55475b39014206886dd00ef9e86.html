<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Vortex Library, BEEP Core implementation, RFC 3080 / RFC 3081, XML-RPC, XML-RPC over BEEP, RFC 3529, BEEP Framework, BEEP protocol, BEEP, BEEP library, BEEP libraries, beepcore (Servidores Linux http://www.aspl.es)</title>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-123192-2";
urchinTracker();
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="vortex.css" rel="stylesheet" type="text/css">
</head>
  <body>
    <div class="af-arch-header">
     <img src="main-page-logo.png" > <a href="http://www.aspl.es"><img class="aspl-logo-header" src="aspl-logo-header.png"></a>
    </div>
    <div class="ads">
    <iframe src="http://www.aspl.es/web-ads/index.php?hcolor=fdff4f&amp;fsize=10&amp;bg=555753&amp;fg=ffffff&amp;width=800&amp;height=90" scrolling="no" frameborder="0"></iframe> 
    </div>
    <div class="separator">
    </div>
<div class="thepage">

<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
  <div class="navpath"><a class="el" href="group__vortex__tls.html">Vortex TLS: TLS profile support and related functions</a>
  </div>
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga331c84ef581a5652b90d025f565fc633.html#ga331c84ef581a5652b90d025f565fc633">vortex_tls_accept_negotiation</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga3333fb271a38fe9fa6bde72a47deccfc.html#ga3333fb271a38fe9fa6bde72a47deccfc">vortex_tls_get_digest</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga7a93953a5d4f750040ebc24cc2aca8a0.html#ga7a93953a5d4f750040ebc24cc2aca8a0">vortex_tls_get_digest_sized</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga9b73730de9a02f7c372910bf16361bb3.html#ga9b73730de9a02f7c372910bf16361bb3">vortex_tls_get_peer_ssl_digest</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga14acd185722a0821d1153a511b54e7b5.html#ga14acd185722a0821d1153a511b54e7b5">vortex_tls_get_ssl_object</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga437e95cdf7763fb117b5668e0a5998bc.html#ga437e95cdf7763fb117b5668e0a5998bc">vortex_tls_init</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_gac686a001db0e2a27f488d404261ca921.html#gac686a001db0e2a27f488d404261ca921">VORTEX_TLS_PROFILE_URI</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="group__vortex__tls_ga014ec55475b39014206886dd00ef9e86.html#ga014ec55475b39014206886dd00ef9e86">vortex_tls_set_auto_tls</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga60ee5a26cd2bcc0a1cda121e82bf1fc9.html#ga60ee5a26cd2bcc0a1cda121e82bf1fc9">vortex_tls_set_common_data</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga00461d1d4c09f208867c0f89ab359cc9.html#ga00461d1d4c09f208867c0f89ab359cc9">vortex_tls_set_ctx_creation</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga475b9d8efa81271d784091b21d165830.html#ga475b9d8efa81271d784091b21d165830">vortex_tls_set_default_ctx_creation</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga1a205361f9d943a8e38383c654ea0a97.html#ga1a205361f9d943a8e38383c654ea0a97">vortex_tls_set_default_post_check</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga2a385fd98f066f6856391084ffcfbba8.html#ga2a385fd98f066f6856391084ffcfbba8">vortex_tls_set_post_check</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_gaa1e4243a5e9de386d8230edafcfad021.html#gaa1e4243a5e9de386d8230edafcfad021">vortex_tls_start_negotiation</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga788893a3196af18fe71dd1a91f334d58.html#ga788893a3196af18fe71dd1a91f334d58">vortex_tls_start_negotiation_sync</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_gae6204131aa6fe4aab9e0d571a382932d.html#gae6204131aa6fe4aab9e0d571a382932d">VortexDigestMethod</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga7aa743e27ab17360a2446678b8a92344.html#ga7aa743e27ab17360a2446678b8a92344">VortexTlsAcceptQuery</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga9d30465b906d99b8673c2059ace1b31d.html#ga9d30465b906d99b8673c2059ace1b31d">VortexTlsActivation</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga3ab0af63b6d2b2ecdf48443220baba24.html#ga3ab0af63b6d2b2ecdf48443220baba24">VortexTlsCertificateFileLocator</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga95cb6046ad10727a9df7cca75b6ef2dc.html#ga95cb6046ad10727a9df7cca75b6ef2dc">VortexTlsCtxCreation</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga6592b4f853286e59d02d180884d79283.html#ga6592b4f853286e59d02d180884d79283">VortexTlsPostCheck</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__tls_ga233882f24b0caaffd07da52f6595d38c.html#ga233882f24b0caaffd07da52f6595d38c">VortexTlsPrivateKeyFileLocator</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top">
<a class="anchor" id="ga014ec55475b39014206886dd00ef9e86"></a><!-- doxytag: member="vortex_tls.c::vortex_tls_set_auto_tls" ref="ga014ec55475b39014206886dd00ef9e86" args="(VortexCtx *ctx, int enabled, int allow_tls_failures, const char *serverName)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void vortex_tls_set_auto_tls </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__vortex__types_ga879b03a2476b60c5b9b75489aabfe7db.html#ga879b03a2476b60c5b9b75489aabfe7db">VortexCtx</a> *&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>enabled</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>allow_tls_failures</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>serverName</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allows to activate TLS profile automatic negotiation for every connection created. </p>
<p>Once a user application is developed using Vortex Library it could be interesting to instruct Vortex Library to automatically negotiate the TLS profile for every connection created. This will make that every call to <a class="el" href="group__vortex__connection_ga727b938695d1037058256e3559d9d599.html#ga727b938695d1037058256e3559d9d599">vortex_connection_new</a> will return not only an instance already connected but also with the TLS profile already activated.</p>
<p>This allows to take advantage of the support developed to create and wait for a <a class="el" href="group__vortex__types_gac16883b703d1e546d54108153d4060b4.html#gac16883b703d1e546d54108153d4060b4">VortexConnection</a> to be created rather than having two steps at the user space: first create the connection and the TLS-fixate it with <a class="el" href="group__vortex__tls_gaa1e4243a5e9de386d8230edafcfad021.html#gaa1e4243a5e9de386d8230edafcfad021">vortex_tls_start_negotiation</a>.</p>
<p>The function allows to specify the optional serverName value to be used when <a class="el" href="group__vortex__tls_gaa1e4243a5e9de386d8230edafcfad021.html#gaa1e4243a5e9de386d8230edafcfad021">vortex_tls_start_negotiation</a> is called. The values set on this function will make effect to all connections created.</p>
<p>Once a <a class="el" href="group__vortex__types_gac16883b703d1e546d54108153d4060b4.html#gac16883b703d1e546d54108153d4060b4">connection</a> is created, the TLS profile negotiation could fail. This is because the remote peer could be not accepting TLS request, or the serverName request is not accepted...</p>
<p>This could be a security problem because there is no difference from using a <a class="el" href="group__vortex__types_gac16883b703d1e546d54108153d4060b4.html#gac16883b703d1e546d54108153d4060b4">VortexConnection</a> with TLS profile activated from other one without it. This could cause user application to start using a connection that is successfully connected but without TLS activated, sending and receiving data in plain mode.</p>
<p>The parameter <b>allow_tls_failures</b> allows to configure what is the default action is to be taken on TLS failures. By default, if TLS profile negotiation fails, the connection is closed, returning that the TLS profile have failed.</p>
<p>Using an axl_true value allows to still keep on working even if the TLS profile negotiation have failed.</p>
<p>By default, Vortex Library have auto TLS feature disabled.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>The context where the operation will be performed.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>enabled</em>&nbsp;</td><td>axl_true to activate the automatic TLS profile negotiation for every connection created, axl_false to disable it.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>allow_tls_failures</em>&nbsp;</td><td>Configure how to handle errors produced while activating automatic TLS negotiation.</td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serverName</em>&nbsp;</td><td>The server name value to be passed in to <a class="el" href="group__vortex__tls_gaa1e4243a5e9de386d8230edafcfad021.html#gaa1e4243a5e9de386d8230edafcfad021">vortex_tls_start_negotiation</a>. If the received is not NULL the function will perform a local copy</td></tr>
  </table>
  </dd>
</dl>
<p><em><b>NOTE:</b> If current Vortex Library doesn't have built-in support for TLS profile, automatic TLS profile negotiation will always fail. This means that setting <b>allow_tls_failures </b> to axl_false will cause Vortex Library client peer to always fail to create new connections.</em></p>
<p><em><b>NOTE2: About failures during the TLS handshake</b> <br/>
 A TLS handshake could fail at two points: before the tuning start or a failure during the TLS handshake itself. In the second case the error is not recoverable because is not possible to restore the BEEP state on both peers.</em></p>
<p><em> In the first case, the connection is still working and BEEP state remains untouched because the error at this phase is caused because the partner peer have denied accepting the TLS handshare by rejecting to create the TLS channel, leaving both peers working at the BEEP level.</em></p>
<p><em> Having this in mind, you must always call to <a class="el" href="group__vortex__connection_ga130045a0527441a1c20332cad32f0f4d.html#ga130045a0527441a1c20332cad32f0f4d">vortex_connection_is_ok</a> after a connection create operation. </em> </p>

</div>
</div>
    </td>
  </tr>
</table>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="lateral-ad">
  <iframe src="http://www.aspl.es/web-ads/index.php?hcolor=fdff4f&amp;fsize=10&amp;bg=555753&amp;fg=ffffff&amp;width=150&amp;type=vertical" height="420" align="middle" width="100%" scrolling="no" frameborder="0"></iframe>
</div>
<div class="footer">
<small>Vortex Library:  A BEEP (RFC3080/RFC3081) implementation. &nbsp; Copyright 2008 (C) Advanced Software Production Line, S.L.</small>
</div>
</body>
</html>

