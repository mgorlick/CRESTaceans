<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>Vortex Library, BEEP Core implementation, RFC 3080 / RFC 3081, XML-RPC, XML-RPC over BEEP, RFC 3529, BEEP Framework, BEEP protocol, BEEP, BEEP library, BEEP libraries, beepcore (Servidores Linux http://www.aspl.es)</title>
<script src="http://www.google-analytics.com/urchin.js" type="text/javascript">
</script>
<script type="text/javascript">
_uacct = "UA-123192-2";
urchinTracker();
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="vortex.css" rel="stylesheet" type="text/css">
</head>
  <body>
    <div class="af-arch-header">
     <img src="main-page-logo.png" > <a href="http://www.aspl.es"><img class="aspl-logo-header" src="aspl-logo-header.png"></a>
    </div>
    <div class="ads">
    <iframe src="http://www.aspl.es/web-ads/index.php?hcolor=fdff4f&amp;fsize=10&amp;bg=555753&amp;fg=ffffff&amp;width=800&amp;height=90" scrolling="no" frameborder="0"></iframe> 
    </div>
    <div class="separator">
    </div>
<div class="thepage">

<!-- Generated by Doxygen 1.6.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="contents">
  <div class="navpath"><a class="el" href="group__vortex__profiles.html">Vortex Profiles: Related functions to manage profiles inside Vortex Library.</a>
  </div>
<table cellspacing="0" cellpadding="0" border="0">
  <tr>
   <td valign="top">
      <div class="navtab">
        <table>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga231977ef6b9f5a9e4e487e26a39938b8.html#ga231977ef6b9f5a9e4e487e26a39938b8">vortex_profiles_acquire</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga89654006a15991c3d8b5d51d5e460b0a.html#ga89654006a15991c3d8b5d51d5e460b0a">vortex_profiles_get_actual_list</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga39093a49f37b8b5cda3a9f381fed1f9d.html#ga39093a49f37b8b5cda3a9f381fed1f9d">vortex_profiles_get_actual_list_ref</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga5f4b7c23cd7e43b6dc5f41375f7730a8.html#ga5f4b7c23cd7e43b6dc5f41375f7730a8">vortex_profiles_get_automatic_mime</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_gab7c3d84b55c5a32e0c1d2585aab88c5b.html#gab7c3d84b55c5a32e0c1d2585aab88c5b">vortex_profiles_get_mime_type</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga40505cf1ee80a0f54b829aa719624804.html#ga40505cf1ee80a0f54b829aa719624804">vortex_profiles_get_transfer_encoding</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga289ee4e3607c548755a5a27386acac3d.html#ga289ee4e3607c548755a5a27386acac3d">vortex_profiles_has_profiles</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_gaefa51e01f91e58bfd767941b60399ff0.html#gaefa51e01f91e58bfd767941b60399ff0">vortex_profiles_is_defined_close</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga951d6e1db9d1a32ff5e31596c61859ad.html#ga951d6e1db9d1a32ff5e31596c61859ad">vortex_profiles_is_defined_received</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga1d93c3fe2ca92da651189a06ffe043b4.html#ga1d93c3fe2ca92da651189a06ffe043b4">vortex_profiles_is_defined_start</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_gad6a198a842e0fb2a8efbe335c3edf901.html#gad6a198a842e0fb2a8efbe335c3edf901">vortex_profiles_is_registered</a></td></tr>
          <tr><td class="navtab"><a class="qindexHL" href="group__vortex__profiles_ga090a544dbe5097f9608401c405f913ff.html#ga090a544dbe5097f9608401c405f913ff">vortex_profiles_register</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga5213a5846562ca8511fd3d73bc3819ed.html#ga5213a5846562ca8511fd3d73bc3819ed">vortex_profiles_register_extended_start</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_gade095e66653297d4206f05a97b94d522.html#gade095e66653297d4206f05a97b94d522">vortex_profiles_registered</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga91ba4d124cf42f70cf773a9a6b14ada6.html#ga91ba4d124cf42f70cf773a9a6b14ada6">vortex_profiles_release</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga825dd8c55d1d123424c0e4e86f3136e6.html#ga825dd8c55d1d123424c0e4e86f3136e6">vortex_profiles_set_automatic_mime</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga884accc35cc44b77e0ab56a65d269059.html#ga884accc35cc44b77e0ab56a65d269059">vortex_profiles_set_mime_type</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_gabd6d449cfb974c830eb5d2665b508b36.html#gabd6d449cfb974c830eb5d2665b508b36">vortex_profiles_set_received_handler</a></td></tr>
          <tr><td class="navtab"><a class="qindex" href="group__vortex__profiles_ga08f8194c53c7dbbbbad27ccc7c38a23c.html#ga08f8194c53c7dbbbbad27ccc7c38a23c">vortex_profiles_unregister</a></td></tr>
        </table>
      </div>
   </td>
   <td valign="top">
<a class="anchor" id="ga090a544dbe5097f9608401c405f913ff"></a><!-- doxytag: member="vortex_profiles.c::vortex_profiles_register" ref="ga090a544dbe5097f9608401c405f913ff" args="(VortexCtx *ctx, const char *uri, VortexOnStartChannel start, axlPointer start_user_data, VortexOnCloseChannel close, axlPointer close_user_data, VortexOnFrameReceived received, axlPointer received_user_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">axl_bool vortex_profiles_register </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group__vortex__types_ga879b03a2476b60c5b9b75489aabfe7db.html#ga879b03a2476b60c5b9b75489aabfe7db">VortexCtx</a> *&nbsp;</td>
          <td class="paramname"> <em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>uri</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__vortex__handlers_ga80c00e4df48fb1740c5946bbdeea7d90.html#ga80c00e4df48fb1740c5946bbdeea7d90">VortexOnStartChannel</a>&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">axlPointer&nbsp;</td>
          <td class="paramname"> <em>start_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__vortex__handlers_ga80a1b36b5894abf6b39054d7f4b16b98.html#ga80a1b36b5894abf6b39054d7f4b16b98">VortexOnCloseChannel</a>&nbsp;</td>
          <td class="paramname"> <em>close</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">axlPointer&nbsp;</td>
          <td class="paramname"> <em>close_user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__vortex__handlers_ga9b856fd8f489ea778799e610eaa0e619.html#ga9b856fd8f489ea778799e610eaa0e619">VortexOnFrameReceived</a>&nbsp;</td>
          <td class="paramname"> <em>received</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">axlPointer&nbsp;</td>
          <td class="paramname"> <em>received_user_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Allows to register a new profile inside the Vortex Library. </p>
<p>Register a profile to be used on channel creation. Profiles are used by Vortex channels to know which message to exchange allowing the application level to implement the channel semantic. To be able to create vortex channels you must register at least one profile.</p>
<p>On vortex session establishment, vortex peer acting as server sends to vortex peer acting as client (or initiator) its registered profiles. This enable both sides to know if they can talk together (there are exceptions to this rule since some BEEP peers may hide which profiles are really supported until, for example, proper authentication is negotiated).</p>
<p>In order to get an idea about profile names to use you can see actual reserved profiles name defined by BEEP RFC. Some on them are:</p>
<ul>
<li>
The one time password profile: <em>"http://iana.org/beep/SASL/OTP"</em> </li>
<li>
The TLS profile: <em>"http://iana.org/beep/TLS"</em> </li>
<li>
The profile used by Coyote layer at Af-Arch: <em>"http://fact.aspl.es/profiles/coyote_profile"</em> </li>
</ul>
<p>Associated to the profile being registered are the handlers. There are three handlers to be executed during the profile life.</p>
<p>When a remote peer wants to create a channel sends a start channel message. On that event, when an start message is received, the <a class="el" href="group__vortex__handlers_ga80c00e4df48fb1740c5946bbdeea7d90.html#ga80c00e4df48fb1740c5946bbdeea7d90">start</a> handler will be executed.</p>
<p>When a remote peer wants to close an already created channel it sends the close channel message. The <a class="el" href="group__vortex__handlers_ga80a1b36b5894abf6b39054d7f4b16b98.html#ga80a1b36b5894abf6b39054d7f4b16b98">close</a> handler is executed on that event.</p>
<p>For all frames received, <a class="el" href="group__vortex__handlers_ga9b856fd8f489ea778799e610eaa0e619.html#ga9b856fd8f489ea778799e610eaa0e619">received</a> handler will be executed.</p>
<p>You can get more info about these handlers <a class="el" href="group__vortex__handlers.html">here</a>. You can also read the following <a class="el" href="profile__example.html">document to know more about profiles</a>.</p>
<p>If you don't provide handlers for <a class="el" href="group__vortex__handlers_ga80c00e4df48fb1740c5946bbdeea7d90.html#ga80c00e4df48fb1740c5946bbdeea7d90">start</a> and <a class="el" href="group__vortex__handlers_ga80a1b36b5894abf6b39054d7f4b16b98.html#ga80a1b36b5894abf6b39054d7f4b16b98">close</a>, a default handler will be used.</p>
<p>These default handlers always return axl_true, so, on channel creation it will accept and on channel closing it will accept.</p>
<p>If you don't provide a received handler, all data received will be acknowledged but dropped.</p>
<p>There are some exception to previous information. First one is that there are two levels of handlers to be executed on events for channels with a profile. The first level is defined by previous ones handlers. But a second level of handlers exists on per-channel basis.</p>
<p>This second level of handlers are executed for the same events before the first level is executed. If a handler for a particular event is not found on second level, then the first handler is executed.</p>
<p>If a handler for a particular event is found on second level, the is executed and first level handler not.</p>
<p>This allows you to have several levels of handlers to be executed in a general way and handlers to be executed for a particular channel.</p>
<p>Another exceptions comes with the <a class="el" href="group__vortex__handlers_ga80c00e4df48fb1740c5946bbdeea7d90.html#ga80c00e4df48fb1740c5946bbdeea7d90">start</a> handler. It only allows you to get notified about the channel number requested to be created and the connection where it was received the petition. On most cases it is not needed more information.</p>
<p>However, the start message have several optional attributes and content element that are used by profile definitions to implement things such as TLS. On that case it is needed to get notified with all data available. You can check <a class="el" href="group__vortex__profiles_ga5213a5846562ca8511fd3d73bc3819ed.html#ga5213a5846562ca8511fd3d73bc3819ed">vortex_profiles_register_extended_start</a> function to know more about this issue.</p>
<p>You can check <a class="el" href="starting__to__program.html#vortex_manual_dispatch_schema">this section</a> to know more about how second level, first level and wait reply method implemented by Vortex Library to receive frames.</p>
<p>You can also check <a class="el" href="profile__example.html">this tutorial</a> about creating new profiles for your application.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ctx</em>&nbsp;</td><td>The context where the operation will be performed. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>uri</em>&nbsp;</td><td>A profile name to register </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>start</em>&nbsp;</td><td>A handler to control channel creation </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>start_user_data</em>&nbsp;</td><td>User defined data to be passed in to start handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>close</em>&nbsp;</td><td>A handler to control channel termination </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>close_user_data</em>&nbsp;</td><td>User defined data to be passed in to close handler </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>received</em>&nbsp;</td><td>A handler to control incoming frames </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>received_user_data</em>&nbsp;</td><td>User defined data to be passed in to received handler</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>The function return axl_true if the profile was properly registered. Otherwise axl_false is returned. </dd></dl>

</div>
</div>
    </td>
  </tr>
</table>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div>
<div class="lateral-ad">
  <iframe src="http://www.aspl.es/web-ads/index.php?hcolor=fdff4f&amp;fsize=10&amp;bg=555753&amp;fg=ffffff&amp;width=150&amp;type=vertical" height="420" align="middle" width="100%" scrolling="no" frameborder="0"></iframe>
</div>
<div class="footer">
<small>Vortex Library:  A BEEP (RFC3080/RFC3081) implementation. &nbsp; Copyright 2008 (C) Advanced Software Production Line, S.L.</small>
</div>
</body>
</html>

