<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>UI</title>
    <link rel="stylesheet" href="style.css" >
	  <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dijit/themes/claro/claro.css">
  <script src="http://ajax.googleapis.com/ajax/libs/dojo/1.7.2/dojo/dojo.js" data-dojo-config="async: true"></script>
  <script src="http://glmatrix.googlecode.com/files/glMatrix-0.9.5.min.js"></script>
  <script src="https://cvs.khronos.org/svn/repos/registry/trunk/public/webgl/sdk/demos/common/webgl-utils.js"></script>

   <!-- vertex shader -->
<script id="2d-vertex-shader" type="x-shader/x-vertex">
attribute vec2 a_position;
attribute vec2 a_texCoord;

uniform vec2 u_resolution;

varying vec2 v_texCoord;

void main() {
   // convert the rectangle from pixels to 0.0 to 1.0
   vec2 zeroToOne = a_position / u_resolution;

   // convert from 0->1 to 0->2
   vec2 zeroToTwo = zeroToOne * 2.0;

   // convert from 0->2 to -1->+1 (clipspace)
   vec2 clipSpace = zeroToTwo - 1.0;

   gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);

   // pass the texCoord to the fragment shader
   // The GPU will interpolate this value between points.
   v_texCoord = a_texCoord;
}
</script></script>
<!-- fragment shader -->
<script id="2d-fragment-shader" type="x-shader/x-fragment">
precision mediump float;

// our texture
uniform sampler2D u_image;

// the texCoords passed in from the vertex shader.
varying vec2 v_texCoord;

void main() {
   gl_FragColor = texture2D(u_image, v_texCoord);
}
</script>

    <script type="text/javascript"><!--
    var pMenuBar;
    var websocket;

    var gl;
	    function initGL(canvas) {
	        try {
	            gl = canvas.getContext("experimental-webgl");
	            gl.viewportWidth = canvas.width;
	            gl.viewportHeight = canvas.height;
	        } catch (e) {
	        }
	        if (!gl) {
	            alert("Could not initialise WebGL, sorry :-(");
	        }
    }

var videoBuffer;
    function initBuffers() {
			var texCoordLocation = gl.getAttribLocation(shaderProgram, "a_texCoord");
	        videoBuffer = gl.createBuffer();
	        gl.bindBuffer(gl.ARRAY_BUFFER, videoBuffer);
	        var vertices = [
				 1.0,  1.0,  0.0,
	            -1.0,  1.0,  0.0,
	             1.0, -1.0,  0.0,
	            -1.0, -1.0,  0.0
	        ];
	        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(vertices), gl.STATIC_DRAW);
	        videoBuffer.itemSize = 3;
	        videoBuffer.numItems = 4;
			gl.enableVertexAttribArray(texCoordLocation);
			gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);

    }

    function getShader(gl, id) {
	        var shaderScript = document.getElementById(id);
	        if (!shaderScript) {
	            return null;
	        }

	        var str = "";
	        var k = shaderScript.firstChild;
	        while (k) {
	            if (k.nodeType == 3) {
	                str += k.textContent;
	            }
	            k = k.nextSibling;
	        }

	        var shader;
	        if (shaderScript.type == "x-shader/x-fragment") {
	            shader = gl.createShader(gl.FRAGMENT_SHADER);
	        } else if (shaderScript.type == "x-shader/x-vertex") {
	            shader = gl.createShader(gl.VERTEX_SHADER);
	        } else {
	            return null;
	        }

	        gl.shaderSource(shader, str);
	        gl.compileShader(shader);

	        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
	            alert(gl.getShaderInfoLog(shader));
	            return null;
	        }

	        return shader;
	    }


	    var shaderProgram;

	    function initShaders() {
	        var fragmentShader = getShader(gl, "shader-fs");
	        var vertexShader = getShader(gl, "shader-vs");

	        shaderProgram = gl.createProgram();
	        gl.attachShader(shaderProgram, vertexShader);
	        gl.attachShader(shaderProgram, fragmentShader);
	        gl.linkProgram(shaderProgram);

	        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
	            alert("Could not initialise shaders");
	        }

	        gl.useProgram(shaderProgram);

	        shaderProgram.vertexPositionAttribute = gl.getAttribLocation(shaderProgram, "aVertexPosition");
	        gl.enableVertexAttribArray(shaderProgram.vertexPositionAttribute);

	        //shaderProgram.pMatrixUniform = gl.getUniformLocation(shaderProgram, "uPMatrix");
	        //shaderProgram.mvMatrixUniform = gl.getUniformLocation(shaderProgram, "uMVMatrix");
			var resolutionLocation = gl.getUniformLocation(shaderProgram, "u_resolution");
			gl.uniform2f(resolutionLocation, gl.viewportWidth, gl.viewportHeight);
	    }


	    var mvMatrix = mat4.create();
	    var pMatrix = mat4.create();

	    function setMatrixUniforms() {
	        gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
	        gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
    }

    var mvMatrix = mat4.create();
	    var mvMatrixStack = [];
	    var pMatrix = mat4.create();

	    function mvPushMatrix() {
	        var copy = mat4.create();
	        mat4.set(mvMatrix, copy);
	        mvMatrixStack.push(copy);
	    }

	    function mvPopMatrix() {
	        if (mvMatrixStack.length == 0) {
	            throw "Invalid popMatrix!";
	        }
	        mvMatrix = mvMatrixStack.pop();
	    }


	    function setMatrixUniforms() {
	        gl.uniformMatrix4fv(shaderProgram.pMatrixUniform, false, pMatrix);
	        gl.uniformMatrix4fv(shaderProgram.mvMatrixUniform, false, mvMatrix);
	    }


	    function degToRad(degrees) {
	        return degrees * Math.PI / 180;
    }

    var rTri = 0;

	    function drawScene() {
	        //gl.viewport(0, 0, gl.viewportWidth, gl.viewportHeight);
			
textureFromPixelArray(gl, [0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0,
0,0,0,0], gl.RGBA, 5, 3);
			gl.viewport(0,0,5,3);	        
			gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);

	        //mat4.perspective(45, gl.viewportWidth / gl.viewportHeight, 0.1, 100.0, pMatrix);

	        //mat4.identity(mvMatrix);

	       // mat4.translate(mvMatrix, [0, 0, 0]);

	       // mvPushMatrix();
	        //mat4.rotate(mvMatrix, degToRad(rTri), [0, 1, 0]);

	        gl.bindBuffer(gl.ARRAY_BUFFER, videoBuffer);
	        gl.vertexAttribPointer(shaderProgram.vertexPositionAttribute, videoBuffer.itemSize, gl.FLOAT, false, 0, 0);

	        //gl.bindBuffer(gl.ARRAY_BUFFER, videoBuffer);
	        //gl.vertexAttribPointer(shaderProgram.vertexColorAttribute, videoBuffer.itemSize, gl.FLOAT, false, 0, 0);

			gl.activeTexture(gl.TEXTURE0);
			gl.bindTexture(gl.TEXTURE_2D, texture);
			//gl.uniform1i(shaderProgram.samplerUniform, 0);

			//setMatrixUniforms();
	        gl.drawArrays(gl.TRIANGLE_STRIP, 0, videoBuffer.numItems);
	        //mvPopMatrix();
    }

    var lastTime = 0;

	    function animate() {
	        var timeNow = new Date().getTime();
	        if (lastTime != 0) {
	            var elapsed = timeNow - lastTime;

	            rTri += (90 * elapsed) / 1000.0;
	            rSquare += (75 * elapsed) / 1000.0;
	        }
	        lastTime = timeNow;
    }

    function tick() {
	       // requestAnimFrame(tick);
		alert('drawing!');
	        drawScene();
	        //animate();
    }

	var texture;
	//from Stack Overflow webgl-create-texture: http://www.stackoverflow.com/questions/9046643/webgl-create-texture
	function textureFromPixelArray(gl, dataArray, type, width, height) {
		if (texture == null) {
			texture = gl.createTexture();
		}		
		var dataTypedArray = new Uint8Array(dataArray);
		gl.bindTexture(gl.TEXTURE_2D, texture);
		gl.texImage2D(gl.TEXTURE_2D, 0, type, width, height, 0, type, gl.UNSIGNED_BYTE, dataTypedArray);
		gl.bindTexture(gl.TEXTURE_2D, null); //clean up
	}

require(["dijit/form/Button", "dijit/layout/BorderContainer", "dijit/layout/ContentPane", "dijit/form/NumberTextBox",
         "dijit/DropDownMenu", "dijit/MenuItem", "dijit/form/DropDownButton", "dijit/MenuBar", "dijit/Menu", "dijit/MenuBarItem",
         "dijit/PopupMenuBarItem","dojo/data/ItemFileReadStore", "dijit/form/Select", "dojo/domReady!"], function(Button, BorderContainer, ContentPane, NumberTextBox,
         DropDownMenu, MenuItem, DropDownButton, MenuBar, Menu, MenuBarItem, PopupMenuBarItem, ItemFileReadStore, Select) {
         pMenuBar = new MenuBar({});
		       var pSubMenu = new DropDownMenu({});
			        /* pSubMenu.addChild(new MenuItem({
			             label:"File item #1"
			         }));
			         pSubMenu.addChild(new MenuItem({
			             label:"File item #2"
			         }));
			         pMenuBar.addChild(new PopupMenuBarItem({
			             label:"File",
			             popup:pSubMenu
			         }));

			         var pSubMenu2 = new DropDownMenu({});
			         pSubMenu2.addChild(new MenuItem({
			             label:"Edit item #1"
			         }));
			         pSubMenu2.addChild(new MenuItem({
			             label:"Edit item #2"
			         }));
			         pMenuBar.addChild(new PopupMenuBarItem({
			             label:"Edit",
			             popup:pSubMenu2
			         }));*/

			          pMenuBar.placeAt("wrapper");
       pMenuBar.startup();
       //webGLStart();

	websocket = new WebSocket("ws://localhost:8080/" + window.location.search);
	websocket.onopen = function (event) {
	};
	websocket.onmessage = function (event) {
		//console.log(msg);
		var msg = JSON.parse(event.data);
		switch(msg.action) {
				case "newitem":
					switch(msg.item) {
						case "button":
							var response = AddButton(msg.id, msg.label, msg.callback);
							var responsemsg = {
								id:   response
							  };
							websocket.send(JSON.stringify(responsemsg));
							break;
						case "menu":
							var response = AddPopupMenu(msg.id, msg.label);
							var responsemsg = {
								id: response
							};
							websocket.send(JSON.stringify(responsemsg));
							break;
						case "menuitem":
							var response = AddMenuItem(msg.id, msg.label, msg.menuid, msg.callback);
							var responsemsg = {
								id:	response
							};
							websocket.send(JSON.stringify(responsemsg));
							break;
						case "canvas":
							var response = AddCanvas(msg.id, msg.label, msg.width, msg.height);
							var responsemsg = {
								id:	response
							};
							websocket.send(JSON.stringify(responsemsg));
							break;
						case "dropdown":
							var response = AddSelectBox(msg.id, msg.label, msg.data);
							var responsemsg = {
								id:	response
							};
							websocket.send(JSON.stringify(responsemsg));
							break;
					}
					break;
			}
		}
         });

function AddButton(id, label, passedFunction)
		     {
		 		var row = document.getElementById('newbutton');
		     	var column = document.createElement('td');
		     	var button = document.createElement('button');
		 	button.id = id;
		     	column.appendChild(button);
		     	row.appendChild(column);

		 	document.getElementById(id).value="New Button Text";

		     	var widg = new dijit.form.Button({
		 						label: (label),
		 						onClick: function()
		 						{
		 				 	    	// Do something:
		 				  	    	eval(passedFunction)
		 				  		}
		     				}, (id)); //options,elementID

		 		//widg.refresh();
		 		document.getElementById('newbutton').id = '';
		 		var newbutton = document.createElement('div');
		 		newbutton.id = 'newbutton';
		 		document.body.insertBefore(newbutton, null);
		         //dojo.parser.parse(dojo.byId(id));
				return button.id;
			}


	function ReturnOne()
        {
		var num = new Number(1);
		return num;
        }



			function AddPopupMenu(id, label)
			{
			    var menu = new dijit.DropDownMenu({id:id});
		     	pMenuBar.addChild(new dijit.PopupMenuBarItem({
							             label: label,
							             popup:menu
						         }));
			}

			function AddMenuItem(id, label, menuid, passedFunction)
			{
				var menu = dijit.byId(menuid);
				menu.addChild(new dijit.MenuItem({
						 id: id,
			             label:label,
			             onClick: function() { eval(passedFunction) }
			         }));
			}

			function AddCanvas(id, width, height)
			{
				var canvasloc = document.getElementById('canvasloc');
				var canvas = document.createElement('canvas');
				canvas.id = id;
				canvas.width = width;
				canvas.height = height;
				canvasloc.appendChild(canvas);
			}

			/*window.setInterval(function () {
				if (window.document.title == 'hi')
				{
					window.document.title='hello';
				}
				else {
					window.document.title = 'hi';
				}
			}, 1000);*/

			function AddSelectBox(id, label, datajsonfile)
			{
			var dataStore = new dojo.data.ItemFileReadStore({
			                url: datajsonfile
			            });

			            // create Select widget, populating its options from the store
			            var select = new dijit.form.Select({
			                //id: id,
			                name: id,
			                store: dataStore,
			                maxHeight: -1 // tells _HasDropDown to fit menu within viewport
			            }, "select");
            			select.startup();

			}

			var texture;
			//from Stack Overflow webgl-create-texture: http://www.stackoverflow.com/questions/9046643/webgl-create-texture
			function textureFromPixelArray(gl, dataArray, type, width, height) {
				if (texture == null) {
					texture = gl.createTexture();
				}		
				var dataTypedArray = new Uint8Array(dataArray);
				gl.bindTexture(gl.TEXTURE_2D, texture);
				gl.texImage2D(gl.TEXTURE_2D, 0, type, width, height, 0, type, gl.UNSIGNED_BYTE, dataTypedArray);
				gl.bindTexture(gl.TEXTURE_2D, null); //clean up
			}

var shaderProgram;
			function init(image, dataArray, type, width, height) {
				// setup GLSL program
	        var fragmentShader = getShader(gl, "2d-fragment-shader");
	        var vertexShader = getShader(gl, "2d-vertex-shader");

	        shaderProgram = gl.createProgram();
	        gl.attachShader(shaderProgram, vertexShader);
	        gl.attachShader(shaderProgram, fragmentShader);
	        gl.linkProgram(shaderProgram);

	        if (!gl.getProgramParameter(shaderProgram, gl.LINK_STATUS)) {
	            alert("Could not initialise shaders");
	        }

	        gl.useProgram(shaderProgram);				  


/*vertexShader = createShaderFromScriptElement(gl, "2d-vertex-shader");
				  fragmentShader = createShaderFromScriptElement(gl, "2d-fragment-shader");
				  program = createProgram(gl, [vertexShader, fragmentShader]);
				  gl.useProgram(program);*/

				  // look up where the vertex data needs to go.
				  var positionLocation = gl.getAttribLocation(shaderProgram, "a_position");
				  var texCoordLocation = gl.getAttribLocation(shaderProgram, "a_texCoord");

				  // provide texture coordinates for the rectangle.
				  var texCoordBuffer = gl.createBuffer();
				  gl.bindBuffer(gl.ARRAY_BUFFER, texCoordBuffer);
				  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
					  0.0,  0.0,
					  1.0,  0.0,
					  0.0,  1.0,
					  0.0,  1.0,
					  1.0,  0.0,
					  1.0,  1.0]), gl.STATIC_DRAW);
				  gl.enableVertexAttribArray(texCoordLocation);
				  gl.vertexAttribPointer(texCoordLocation, 2, gl.FLOAT, false, 0, 0);

				  // Create a texture.
				  if (texture == null) {
					texture = gl.createTexture();
				  }		
				  var dataTypedArray = new Uint8Array(dataArray);
				  gl.bindTexture(gl.TEXTURE_2D, texture);

				  // Set the parameters so we can render any size image.
				  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);
				  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);
				  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);
				  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);

				  // Upload the image into the texture.
				  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);
				  //gl.texImage2D(gl.TEXTURE_2D, 0, type, width, height, 0, type, gl.UNSIGNED_BYTE, dataTypedArray);

				  // lookup uniforms
				  var resolutionLocation = gl.getUniformLocation(shaderProgram, "u_resolution");

				  // set the resolution
				  gl.uniform2f(resolutionLocation, gl.viewportWidth, gl.viewportHeight);

				  // Create a buffer for the position of the rectangle corners.
				  var buffer = gl.createBuffer();
				  gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
				  gl.enableVertexAttribArray(positionLocation);
				  gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);

				  // Set a rectangle the same size as the image.
				  setRectangle(gl, 0, 0, image.width, image.height);

				  // Draw the rectangle.
				  gl.drawArrays(gl.TRIANGLES, 0, 6);
			}

function setRectangle(gl, x, y, width, height) {
  var x1 = x;
  var x2 = x + width;
  var y1 = y;
  var y2 = y + height;
  gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([
     x1, y1,
     x2, y1,
     x1, y2,
     x1, y2,
     x2, y1,
     x2, y2]), gl.STATIC_DRAW);
}

			function webGLStart() {
			    var canvas = document.getElementById("vid");
			    initGL(canvas);
var image = new Image();
  image.src = "leaves.jpg";  // MUST BE SAME DOMAIN!!!
  image.onload = function() {
    init(image, [128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128,
128,128,128,128], gl.RGBA, 30, 30);
  }
			    
				//initBuffers();
				//initShaders();
				
			    //gl.clearColor(0.0, 0.0, 0.0, 1.0);
			    //gl.enable(gl.DEPTH_TEST);

			    //tick();
  			}
    // --></script>
  </head>
  <body class="claro">
    <div id="wrapper"></div>
    <button id="addbutton" type="button" onClick="AddButton('hi', function(){ alert('hi');})">Create new button</button>
    <button id="addmenu" type="button" onClick="AddPopupMenu('Options')">Create new menu</button>
    <button id="addmenuitem" type="button" onClick="AddMenuItem('Preferences', 'Options', function(){ alert('Preferences pressed!');})">Create new menu item</button>
    <button id="addmenuitem" type="button" onClick="AddMenuItem('About', 'Options', function(){ alert('About pressed!');})">Create about</button>
    <button id="addcanvas" type="button" onClick="AddCanvas('vid', 500, 500); webGLStart();">Create canvas</button>
    <button id="addselect" type="button" onClick="AddSelectBox('sel', 'ips.json')">Create Select</button>
    <!-- button id="addselector" type="button" onClick="AddCanvas('vid', 500, 500)">Create canvas</button -->


	<div id="newbutton"></div>
	<div id="select"></div>
	<div id="canvasloc"></div>
  </body>
</html>
